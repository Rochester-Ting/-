(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-527387f6","chunk-3f21affe","chunk-2d212bd8"],{"5dbc":function(t,e,r){var o=r("d3f4"),n=r("8b97").set;t.exports=function(t,e,r){var a,i=e.constructor;return i!==r&&"function"==typeof i&&(a=i.prototype)!==r.prototype&&o(a)&&n&&n(t,a),t}},"89a6":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("el-form",{ref:"ruleForm",staticStyle:{width:"100%"},attrs:{"label-width":"128px","label-position":"top",inline:!0}},[r("el-row",[r("el-col",{attrs:{span:24}},[t.roomTypeList.length>0?r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"已有房型："}},[r("div",{staticClass:"d-flex flex-wrap"},[t._l(t.roomTypeList,(function(e,o){return r("div",{key:o,staticClass:"room-type-item",class:o===t.currentIndex?"room-type-item-active":"",on:{click:function(r){t.clickRoomType(e,o)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])})),r("div",{staticClass:"item-plus cursor-pointer",class:-1===t.currentIndex?"room-type-item-active":"",on:{click:function(e){return e.stopPropagation(),t.addRoomTypeClick(e)}}},[r("i",{staticClass:"el-icon-plus"})])],2)]):t._e()],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"房型名称：",prop:"name"}},[r("el-input",{attrs:{placeholder:""},model:{value:t.formObj.name,callback:function(e){t.$set(t.formObj,"name",e)},expression:"formObj.name"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"租赁方式：",prop:"rentType"}},[r("el-select",{attrs:{placeholder:""},model:{value:t.formObj.rentType,callback:function(e){t.$set(t.formObj,"rentType",e)},expression:"formObj.rentType"}},t._l(t.rent_type,(function(t){return r("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})))],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"装修方式：",prop:"decorateType"}},[r("el-select",{attrs:{placeholder:""},model:{value:t.formObj.decorateType,callback:function(e){t.$set(t.formObj,"decorateType",e)},expression:"formObj.decorateType"}},t._l(this.decorate_type,(function(t){return r("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})))],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"房型面积(㎡)：",prop:"area"}},[r("el-input-number",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:t.formObj.area,callback:function(e){t.$set(t.formObj,"area",e)},expression:"formObj.area"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"出租价(元/月)：",prop:"price"}},[r("el-input-number",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:t.formObj.price,callback:function(e){t.$set(t.formObj,"price",e)},expression:"formObj.price"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"卧室数量：",prop:"roomCount"}},[r("el-input-number",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:t.formObj.roomCount,callback:function(e){t.$set(t.formObj,"roomCount",e)},expression:"formObj.roomCount"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"厅数量：",prop:"hall"}},[r("el-input-number",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:t.formObj.hall,callback:function(e){t.$set(t.formObj,"hall",e)},expression:"formObj.hall"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"卫生间数量：",prop:"who"}},[r("el-input-number",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:t.formObj.who,callback:function(e){t.$set(t.formObj,"who",e)},expression:"formObj.who"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"房型介绍：",prop:"intro"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea"},model:{value:t.formObj.intro,callback:function(e){t.$set(t.formObj,"intro",e)},expression:"formObj.intro"}})],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formObj.roomTypeConfigList.concat({status:-1e4,roomItem:"",count:1,remark:""}),border:!0}},[r("el-table-column",{attrs:{prop:"roomItem",label:"物品"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1e4===e.row.status?r("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:""},model:{value:e.row.roomItem,callback:function(r){t.$set(e.row,"roomItem",r)},expression:"scope.row.roomItem"}},t._l(t.room_type_config,(function(t){return r("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})}))):r("span",[t._v(t._s(e.row.roomItem))])]}}])}),r("el-table-column",{attrs:{prop:"count",label:"数量",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1e4===e.row.status?r("el-input-number",{staticStyle:{width:"80px"},attrs:{controls:!1,placeholder:""},model:{value:e.row.count,callback:function(r){t.$set(e.row,"count",r)},expression:"scope.row.count"}}):r("span",[t._v(t._s(e.row.count))])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1e4===e.row.status?r("el-input",{staticStyle:{width:"140px"},attrs:{controls:!1,placeholder:""},model:{value:e.row.remark,callback:function(r){t.$set(e.row,"remark",r)},expression:"scope.row.remark"}}):r("span",[t._v(t._s(e.row.remark))])]}}])}),r("el-table-column",{attrs:{prop:"count",label:"操作",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1e4===e.row.status?r("a",{staticClass:"btn btn-link",on:{click:function(r){r.stopPropagation(),t.addRoomConfigInfoClick(e)}}},[t._v("\n            增加\n          ")]):r("i",{staticClass:"iconfont el-icon-delete cursor-pointer",on:{click:function(r){r.stopPropagation(),t.delRoomConfigInfoClick(e)}}})]}}])})],1),r("el-form-item",{attrs:{label:"房屋图片："}},[r("el-upload",{staticClass:"upload-demo",attrs:{"on-exceed":t.handleExceed,"on-remove":t.handleRemove,"on-success":t.uploadSuccess,"on-error":t.uploadError,"file-list":t.imgsUrl,drag:"",action:t.baseUrl+"sys/file/upload?type=image",multiple:"",limit:10,"list-type":"picture"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[t._v("\n          将文件拖到此处，或\n          "),r("em",[t._v("点击上传")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件")])])],1)],1),r("div",{staticClass:"border-top mt-5 pt-10"},[r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticClass:"btn btn-primary font-weight-bolder text-uppercase px-9 py-4",attrs:{loading:t.submitLoading},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("\n        保存\n      ")])],1)])],1)},n=[],a=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("2397"),r("c5f6"),r("7514"),r("7f7f"),r("96cf"),r("1da1")),i=r("d4ec"),s=r("bee2"),c=r("262e"),l=r("99de"),u=r("7e84"),f=r("9ab4"),p=r("60a3"),m=r("aa68");function d(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function b(t,e){if(t){if("string"===typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function y(t){var e=v();return function(){var r,o=Object(u["a"])(t);if(e){var n=Object(u["a"])(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l["a"])(this,r)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var g=function(t){Object(c["a"])(r,t);var e=y(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.roomTypeList=[],t.submitLoading=!1,t.currentIndex=-1,t.formObj={id:"",area:"",decorateType:"",fileList:[{url:""}],hall:"",roomCount:"",who:"",intro:"",name:"",price:"",projectId:"",rentType:"",status:"1",roomTypeConfigList:[]},t.formObjInit={area:"",decorateType:"",fileList:[{url:""}],hall:"",roomCount:"",who:"",intro:"",name:"",price:"",projectId:"",rentType:"",status:"1",roomTypeConfigList:[]},t.imgsUrl=[],t.decorate_type=[],t.room_type_config=[],t.rent_type=[],t}return Object(s["a"])(r,[{key:"mounted",value:function(){this.getRoomTypeList(),this.typeList()}},{key:"baseUrl",get:function(){return"http://www.immvisa.com.cn:8084/"}},{key:"typeList",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["c"])({dictCode:"decorate_type"});case 2:return e=t.sent,this.decorate_type=e.data,t.next=6,Object(m["c"])({dictCode:"room_type_config"});case 6:return r=t.sent,this.room_type_config=r.data,t.next=10,Object(m["c"])({dictCode:"rent_type"});case 10:o=t.sent,this.rent_type=o.data;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRoomTypeList",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m["g"])({projectId:this.projectId});case 3:e=t.sent,200===e.code?(this.roomTypeList=e.data,this.roomTypeList.length>0&&this.clickRoomType(this.roomTypeList[0],0,!0)):this.$message.error(e.msg+""),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$message.error(t.t0.msg||t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"submitForm",value:function(t){this.requestSubmitPost()}},{key:"requestSubmitPost",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.submitLoading=!0,this.formObj.projectId=this.projectId+"",e=d(this.formObj.roomTypeConfigList);try{for(e.s();!(r=e.n()).done;)o=r.value,o.projectId=this.projectId+""}catch(a){e.e(a)}finally{e.f()}if(this.formObj.name&&this.formObj.projectId&&this.formObj.hall&&this.formObj.roomCount&&this.formObj.area&&this.formObj.decorateType){t.next=7;break}return this.$message.warning("请输入完整的数据"),t.abrupt("return");case 7:if(t.prev=7,this.formObj.id){t.next=14;break}return t.next=11,Object(m["i"])(this.formObj);case 11:n=t.sent,t.next=17;break;case 14:return t.next=16,Object(m["k"])(this.formObj);case 16:n=t.sent;case 17:if(200!==n.code){t.next=27;break}return this.formObj.id=n.data,this.imgsUrl=[],t.next=22,this.getRoomTypeList();case 22:return t.next=24,this.typeList();case 24:this.$message.success("保存成功"),t.next=28;break;case 27:this.$message.error(n.msg);case 28:this.submitLoading=!1,t.next=35;break;case 31:t.prev=31,t.t0=t["catch"](7),this.$message.error(t.t0.msg||t.t0.message),this.submitLoading=!1;case 35:case"end":return t.stop()}}),t,this,[[7,31]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"delRoomConfigInfoClick",value:function(t){this.formObj.roomTypeConfigList.splice(t.$index,1)}},{key:"addRoomConfigInfoClick",value:function(t){var e=this.room_type_config.find((function(e){return e.value===t.row.roomItem}));e&&this.formObj.roomTypeConfigList.push({count:t.row.count,projectId:"",remark:t.row.remark,roomItem:e.name,roomTypeId:t.row.roomItem,status:"1"})}},{key:"addRoomTypeClick",value:function(){this.currentIndex>=0&&(this.roomTypeList[this.currentIndex]=JSON.parse(JSON.stringify(this.formObj)));var t=JSON.parse(JSON.stringify(this.formObjInit));this.formObj=t,this.currentIndex=-1,this.imgsUrl=[]}},{key:"clickRoomType",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(e!==this.currentIndex||r)&&(this.currentIndex>=0&&(this.roomTypeList[this.currentIndex]=JSON.parse(JSON.stringify(this.formObj))),this.currentIndex=e,this.formObj=JSON.parse(JSON.stringify(t)),this.formObj.fileList&&(this.imgsUrl=1===this.formObj.fileList.length&&""===this.formObj.fileList[0].url?[]:JSON.parse(JSON.stringify(this.formObj.fileList)),this.giveImageUrlsAddDomian()))}},{key:"giveImageUrlsAddDomian",value:function(){var t,e=d(this.imgsUrl);try{for(e.s();!(t=e.n()).done;){var r=t.value;-1===r.url.indexOf("http:")&&-1===r.url.indexOf("https:")&&(r.url="http://sayhi-room.oss-cn-qingdao.aliyuncs.com/"+r.url)}}catch(o){e.e(o)}finally{e.f()}}},{key:"handleExceed",value:function(t){this.$message.warning("上传图片超出数量")}},{key:"handleRemove",value:function(t,e){this.formObj.fileList=[];var r,o=d(e);try{for(o.s();!(r=o.n()).done;){var n=r.value;this.formObj.fileList.push({url:n.response.data})}}catch(a){o.e(a)}finally{o.f()}}},{key:"uploadSuccess",value:function(t,e,r){this.formObj.fileList&&(1===this.formObj.fileList.length&&""===this.formObj.fileList[0].url&&(this.formObj.fileList=[]),this.formObj.fileList.push({url:e.response.data}))}},{key:"uploadError",value:function(t,e,r){this.$message.error("上传出错, 请删除后继续")}}]),r}(p["d"]);f["a"]([Object(p["c"])({type:[Number,String],default:""})],g.prototype,"projectId",void 0),g=f["a"]([Object(p["a"])({components:{}})],g);var j=g,O=j,w=(r("a8e1"),r("2877")),k=Object(w["a"])(O,o,n,!1,null,"211add27",null);e["default"]=k.exports},"8b97":function(t,e,r){var o=r("d3f4"),n=r("cb7c"),a=function(t,e){if(n(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:o(t,r),t}}({},!1):void 0),check:a}},a8e1:function(t,e,r){"use strict";r("b1aa")},aa68:function(t,e,r){"use strict";r.d(e,"h",(function(){return a})),r.d(e,"g",(function(){return i})),r.d(e,"c",(function(){return s})),r.d(e,"i",(function(){return c})),r.d(e,"k",(function(){return l})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return p})),r.d(e,"j",(function(){return m})),r.d(e,"d",(function(){return d})),r.d(e,"f",(function(){return b}));var o=r("63a2"),n=new o["a"]({baseURL:"http://www.immvisa.com.cn:8084/",headers:{"Content-Type":"application/json;charset=utf-8"}});function a(t){return n.post("/buss/project/save",t)}function i(t){return n.get("/buss/room/type/list",t)}function s(t){return n.get("/sys/dict/select",t)}function c(t){return n.post("/buss/room/type/save",t)}function l(t){return n.post("/buss/room/type/save",t)}function u(t){return n.get("/buss/room/editAll",t)}function f(t){return n.post("/buss/room/fastAdd",t)}function p(t){return n.get("/buss/project/building/select",t)}function m(t){return n.post("/buss/room/update",t)}function d(t){return n.get("/buss/project/get",t)}function b(t){return n.get("/buss/room/select",t)}},aa77:function(t,e,r){var o=r("5ca1"),n=r("be13"),a=r("79e5"),i=r("fdef"),s="["+i+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),f=function(t,e,r){var n={},s=a((function(){return!!i[t]()||c[t]()!=c})),l=n[t]=s?e(p):i[t];r&&(n[r]=l),o(o.P+o.F*s,"String",n)},p=f.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},b1aa:function(t,e,r){},c5f6:function(t,e,r){"use strict";var o=r("7726"),n=r("69a8"),a=r("2d95"),i=r("5dbc"),s=r("6a99"),c=r("79e5"),l=r("9093").f,u=r("11e9").f,f=r("86cc").f,p=r("aa77").trim,m="Number",d=o[m],b=d,h=d.prototype,y=a(r("2aeb")(h))==m,v="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var r,o,n,a=e.charCodeAt(0);if(43===a||45===a){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+e}for(var i,c=e.slice(2),l=0,u=c.length;l<u;l++)if(i=c.charCodeAt(l),i<48||i>n)return NaN;return parseInt(c,o)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(y?c((function(){h.valueOf.call(r)})):a(r)!=m)?i(new b(g(e)),r,d):g(e)};for(var j,O=r("9e1e")?l(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;O.length>w;w++)n(b,j=O[w])&&!n(d,j)&&f(d,j,u(b,j));d.prototype=h,h.constructor=d,r("2aba")(o,m,d)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-527387f6.a1341d54.js.map