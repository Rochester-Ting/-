{"version":3,"sources":["webpack:///./src/views/manage/sys/role/RoleForm.vue?da50","webpack:///./src/views/manage/sys/role/RoleForm.vue?e857","webpack:///./src/views/manage/sys/role/RoleForm.vue?b6e3","webpack:///./src/views/manage/sys/role/RoleForm.vue","webpack:///./src/api/manage/sys/roleApi.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","formObj","formRules","visible","staticStyle","model","value","callback","$$v","$set","expression","formAction","treeDataSource","defaultProps","scopedSlots","_u","key","fn","node","data","class","icon","_s","label","directives","name","rawName","on","resetForm","submitLoading","save","staticRenderFns","reqFunctions","create","update","children","required","message","trigger","code","treeData","tree","$refs","setCheckedKeys","row","then","res","permissionIds","getCheckedKeys","backToPage","handleClose","createdFormCallback","buildCreatedForm","treeNode","item","permission","type","formPageMixin","default","components","component","HTTP","baseURL","headers","getSelectData","get","getPage","query","addObj","obj","post","putObj","getPermissionCode","roleCode"],"mappings":"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","file":"js/chunk-4d43542e.8b3321a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h4',{staticClass:\"mb-10 font-weight-bold text-dark\"},[_vm._v(\"填写角色信息\")]),_c('el-form',{ref:\"saveFrom\",attrs:{\"model\":_vm.formObj,\"label-width\":\"120px\",\"rules\":_vm.formRules,\"disabled\":!_vm.visible}},[_c('el-row',[_c('el-col',{staticStyle:{\"width\":\"400px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称：\",\"prop\":\"name\"}},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.formObj.name),callback:function ($$v) {_vm.$set(_vm.formObj, \"name\", $$v)},expression:\"formObj.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色编码：\",\"prop\":\"code\"}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入内容\",\"disabled\":_vm.formAction=='update'},model:{value:(_vm.formObj.code),callback:function ($$v) {_vm.$set(_vm.formObj, \"code\", $$v)},expression:\"formObj.code\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型：\",\"prop\":\"type\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.formObj.type),callback:function ($$v) {_vm.$set(_vm.formObj, \"type\", $$v)},expression:\"formObj.type\"}},[_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"系统\")]),_c('el-radio-button',{attrs:{\"label\":2}},[_vm._v(\"业务\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"描述：\"}},[_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.formObj.note),callback:function ($$v) {_vm.$set(_vm.formObj, \"note\", $$v)},expression:\"formObj.note\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"授权：\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.treeDataSource,\"props\":_vm.defaultProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"expand-on-click-node\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_c('span',{staticClass:\"mr-3\"},[_c('i',{class:data.icon})]),_c('span',{staticClass:\"nav-text\"},[_vm._v(_vm._s(node.label))])])])}}])})],1)],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formAction!='none'),expression:\"formAction!='none'\"}],staticClass:\"border-top mt-5 pt-10\"},[_c('div',{staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{staticClass:\"btn btn-secondary font-weight-bolder text-uppercase px-9 py-4 mr-2\",on:{\"click\":_vm.resetForm}},[_vm._v(\"取 消\")]),_c('el-button',{staticClass:\"btn btn-primary font-weight-bolder text-uppercase px-9 py-4\",attrs:{\"loading\":_vm.submitLoading},on:{\"click\":_vm.save}},[_vm._v(\"提 交\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Mixins, Prop, Vue} from \"vue-property-decorator\";\r\nimport {formPageMixin} from \"@/mixins/formPageMixin\";\r\nimport {getList} from \"@/api/manage/sys/permissionApi\";\r\nimport {listToTree} from \"@/utils/treeUtil\";\r\nimport {addObj, getPermissionCode, putObj} from \"@/api/manage/sys/roleApi\";\r\nimport {Form, Tree} from \"element-ui\";\r\n\r\n@Component({\r\n  components: {}\r\n})\r\nexport default class RoleForm extends Mixins(formPageMixin) {\r\n  @Prop() title!: string;\r\n  @Prop({default: []}) public readonly orgTreeData!: [];\r\n\r\n  treeDataSource: any = [];\r\n  reqFunctions = {\r\n    create: addObj,\r\n    update: putObj\r\n  }\r\n\r\n  defaultProps: any = {\r\n    children: 'children',\r\n    label: 'title',\r\n    icon: 'icon'\r\n  }\r\n\r\n  mounted() {\r\n    this.treeData();\r\n  }\r\n\r\n  // beforeStartSubmit() {\r\n  //   let list = this.formObj.organizationId;\r\n  //   this.formObj.organizationId = list[list.length - 1];\r\n  //   return true;\r\n  // }\r\n\r\n\r\n  createdFormCallback() {\r\n    const tree = this.$refs[\"tree\"] as Tree;\r\n    tree.setCheckedKeys([]);\r\n  }\r\n\r\n  echoDataProcess(row: any) {\r\n    const tree = this.$refs[\"tree\"] as Tree;\r\n    getPermissionCode(row.code)\r\n        .then((res: any) => {\r\n          tree.setCheckedKeys(res.data);\r\n        })\r\n\r\n  }\r\n\r\n  submitDataProcess(data: any) {\r\n    const tree = this.$refs[\"tree\"] as Tree;\r\n    data.permissionIds = tree.getCheckedKeys();\r\n    return data;\r\n  }\r\n\r\n  submitSuccess(res: any) {\r\n    this.backToPage(true);\r\n    this.handleClose();\r\n    this.createdFormCallback();\r\n  }\r\n\r\n  resetForm() {\r\n    this.buildCreatedForm();\r\n    this.visible = false;\r\n    this.formAction = \"none\";\r\n  }\r\n\r\n\r\n  treeData() {\r\n    getList().then((res: any) => {\r\n\r\n      this.treeDataSource = listToTree(res.data, 0, (treeNode: any, item: any) => {\r\n        treeNode.permission = item\r\n        switch (treeNode.type) {\r\n          case 1:\r\n            treeNode.icon = \"el-icon-copy-document\";\r\n            break;\r\n          case 2:\r\n            treeNode.icon = \"el-icon-thumb\";\r\n            break;\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  formRules = {\r\n    name: [\r\n      {required: true, message: '请输入角色名称', trigger: 'blur'}\r\n    ],\r\n    code: [\r\n      {required: true, message: '请输入角色编码', trigger: 'blur'}\r\n    ]\r\n  }\r\n}\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleForm.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleForm.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RoleForm.vue?vue&type=template&id=0947fb14&\"\nimport script from \"./RoleForm.vue?vue&type=script&lang=ts&\"\nexport * from \"./RoleForm.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import apiCore from \"@/utils/apiCore\";\r\n\r\n\r\nconst HTTP = new apiCore({\r\n    baseURL: process.env.VUE_APP_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json;charset=utf-8',\r\n    },\r\n});\r\n\r\nexport function getSelectData() {\r\n    return HTTP.get('/sysrole/select', {});\r\n}\r\n\r\n\r\nexport function getPage (query:any) {\r\n    return HTTP.get('/sysrole/page', query);\r\n}\r\n\r\nexport function getObj (id:any) {\r\n    return HTTP.get('/sysrole/' + id, {});\r\n}\r\n\r\nexport function addObj (obj:any) {\r\n    return HTTP.post('/sysrole/', obj);\r\n}\r\n\r\nexport function putObj (obj:any) {\r\n    return HTTP.post('/sysrole/updateInfo', obj);\r\n}\r\n\r\nexport function delObj (id:any) {\r\n    return HTTP.delete('/sysrole/' + id, {});\r\n}\r\n\r\nexport function getPermissionCode (roleCode:any) {\r\n    return HTTP.get('/sysrole/permission/code/' + roleCode, {});\r\n}\r\n"],"sourceRoot":""}